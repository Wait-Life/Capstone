<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
    <meta charset="UTF-8"/>
    <title>Mapbox Sandbox</title>
    <title>Place the geocoder input outside the map</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no'/>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.4.0/mapbox-gl.css' rel='stylesheet'/>
    <link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.4.2/mapbox-gl-geocoder.css' type='text/css'/>
<!--    <style>-->
<!--        body {-->
<!--            background: #404040;-->
<!--            color: #f8f8f8;-->
<!--            font: 500 20px/26px 'Helvetica Neue', Helvetica, Arial, Sans-serif;-->
<!--            margin: 0;-->
<!--            padding: 0;-->
<!--            -webkit-font-smoothing: antialiased;-->
<!--        }-->

<!--        /* The page is split between map and sidebar - the sidebar gets 1/3, map-->
<!--        gets 2/3 of the page. You can adjust this to your personal liking. */-->
<!--        .sidebar {-->
<!--            width: 33.3333%;-->
<!--        }-->

<!--        .map {-->
<!--            border-left: 1px solid #fff;-->
<!--            position: absolute;-->
<!--            left: 33.3333%;-->
<!--            width: 66.6666%;-->
<!--            top: 0;-->
<!--            bottom: 0;-->
<!--        }-->

<!--        .pad2 {-->
<!--            padding: 20px;-->
<!--            -webkit-box-sizing: border-box;-->
<!--            -moz-box-sizing: border-box;-->
<!--            box-sizing: border-box;-->
<!--        }-->
<!--    </style>-->
</head>
<body>

<div class='sidebar pad2'>Listing</div>
<div id='map' class='map pad2'>Map</div>

<!--<div id='map'></div>-->
<div id='geocoder' class='geocoder'></div>

<script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.4.2/mapbox-gl-geocoder.min.js'></script>
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.3.2/mapbox-gl.js'></script>
<script src="js/mapbox-utils.js"></script>
<script src="js/keys.js"></script>
<script>
    "use strict";
    $(document).ready(function() {
        mapboxgl.accessToken = mapBoxKey;

        geocode("San Antonio, TX", mapBoxKey).then(function(loc) {
            let mapOptions = {
                container: 'map',
                style: 'mapbox://styles/mapbox/streets-v9',
                zoom: 15,
                showZoom: true,
                center: loc
            };

            let map = new mapboxgl.Map(mapOptions);

            map.addControl(new mapboxgl.NavigationControl());

            let geocoder = new MapboxGeocoder({
                accessToken: mapBoxKey,
                mapboxgl: mapboxgl
            });

            document.getElementById('geocoder').appendChild(geocoder.onAdd(map));
            let search = $('.mapboxgl-ctrl-geocoder--input');
            search.attr('id', 'address');
            search.attr('name', 'address');
        });

        var geocoder = new MapboxGeocoder({
            accessToken: mapboxgl.accessToken,
            mapboxgl: mapboxgl
        });
    });

    document.getElementById('geocoder').appendChild(geocoder.onAdd(map));
</script>


</body>
</html>